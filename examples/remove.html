<!DOCTYPE html>
<html>
  <head>
    <title>On Remove Example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
      [l-view]{
        display: none;
      }
    </style>
  </head>
<body>

  <div id="main"></div>

  <div l-view="A">FOO: <div id="$id" display="viewMethod.testRemove">$id</div></div>
  <div l-view="B" id="B">B</div>

  <script type="text/javascript" src="../../../build/lapiz.js"></script>
  <script type="text/javascript" src="../../../build/template.js"></script>
  <script type="text/javascript" src="../ui.js"></script>
  <script type="text/javascript" src="../uiHelpers.js"></script>
  <script type="text/javascript">

  Lapiz.UI.mediator.viewMethod(function testRemove(node, ctx){
    Lapiz.UI.on.remove(node, function(){
      console.log("Removed: ", node.attributes.getNamedItem("id").value)
    });
  });

  Lapiz.UI.render("A > #main", {"id": "A1"});

  function getRoot(node){
    for(;node.parentNode !== null; node = node.parentNode){}
    return node;
  }

  setTimeout(function(){
    var n = Lapiz.UI.id("A1");
    console.log(getRoot(n));
    Lapiz.UI.render("A > #main", {"id": "A2"});
    console.log(getRoot(n));
  }, 1000);

  var df = document.createDocumentFragment();
  setTimeout(function(){
    var n = Lapiz.UI.id("A2");
    console.log(getRoot(n));
    df.appendChild(n);
    console.log(getRoot(n));
    //Lapiz.UI.render("B > #main");
  },2000);
  
  </script>
  </body>
</html>